# Development

I developed this locally using [Brunch][]. Here are the files generated by a
new Brunch project. I need to put the HTML and JavaScript I generated into
files in locations used by brunch.  Brunch automatically concatenates the
JavaScript under `app/` and serves HTML pages in `app/assets/`.

###### file:app/assets/index.html
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
      <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
      <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
      <title>Brunch with ES6</title>
      <script src="/vendor.js"></script>
      <script src="/app.js"></script>
      <script>require('initialize');</script>
    </head>
    <body>
      <div id="app"></div>
    </body>
    </html>

The `initialize.js` file kickstarts the application. [The main
program](./README.md) needs to provide a function called `my_code`.

###### file:app/initialize.js
    document.addEventListener('DOMContentLoaded', () => {
        var my_code = require('my_code.js');
        my_code.run();
    });

There's a `.gitignore` to hide generated files.

###### file:.gitignore
    # Numerous always-ignore extensions
    *.diff
    *.err
    *.orig
    *.log
    *.rej
    *.swo
    *.swp
    *.vi
    *~
    *.sass-cache

    # OS or Editor folders
    .DS_Store
    .cache
    .project
    .settings
    .tmproj
    nbproject
    Thumbs.db

    # NPM packages folder.
    node_modules/

    # Brunch output folder.
    public/

A new project is given a `brunch-config.js`. The only thing I customized is the
server hostname. I'm running it in a Docker container, so `0.0.0.0` is fine.

###### file:brunch-config.js
    module.exports = {
      files: {
        javascripts: {
          joinTo: {
            'vendor.js': /^(?!app)/,
            'app.js': /^app/
          }
        },
        stylesheets: {joinTo: 'app.css'}
      },

      plugins: {
        babel: {presets: ['es2015']}
      },

      server: {
        hostname: '0.0.0.0'
      }
    };

Brunch is a Node application, so it needs a `package.json`. I don't think I'll
need to change this. Brunch does a thing whereby it'll automatically install
vendor libraries, but the point of this program is to not use any libraries. In
a real project I would need to evaluate whether or not this should be managed
in the literate program.

###### file:package.json
    {
      "name": "your-app",
      "description": "Description",
      "author": "Your Name",
      "version": "0.0.1",
      "repository": {
        "type": "git",
        "url": ""
      },
      "scripts": {
        "start": "brunch watch --server",
        "prod": "brunch build --production"
      },
      "dependencies": {},
      "devDependencies": {
        "auto-reload-brunch": "^2.0.0",
        "babel-brunch": "~6.0.0",
        "babel-preset-es2015": "~6.3.13",
        "brunch": "^2.4.0",
        "clean-css-brunch": "^2.0.0",
        "css-brunch": "^2.0.0",
        "javascript-brunch": "^2.0.0",
        "uglify-js-brunch": "^2.0.0"
      }
    }



[Brunch]: http://brunch.io/
